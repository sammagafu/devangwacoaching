import{u as B,bn as q,q as g,i as k,o as V,a as e,b as s,w as t,$ as D,H as I,f as i,Y as N,D as Y,x as A,t as H,ar as T,Q as U,e as $,bA as j,r as C,h as z,bB as G,L as M,g as d,C as W,b4 as O}from"./index-BKxaJmes.js";import{e as Q}from"./02-BB8qXDB_.js";import{am as J,an as K,ao as X}from"./index-DdoyQ2gK.js";import{e as Z,d as ee}from"./index-DP6gMcTi.js";const se={class:"p-0 d-flex align-items-center position-relative overflow-hidden"},te={class:"p-3 p-lg-5"},oe=e("div",{class:"text-center"},[e("h2",{class:"fw-bold"},"Welcome to our largest community"),e("p",{class:"mb-0 h6 fw-light"},"Let's learn something new today!")],-1),ae=["src"],le=e("span",{class:"mb-0 fs-1"},"ðŸ‘‹",-1),ne=e("h1",{class:"fs-2"},"Login into Devangwa Coaching",-1),ie=e("p",{class:"lead mb-4"},"Nice to see you! Please log in with your account.",-1),re={key:0,class:"mb-4 text-danger"},ce={class:"mb-4"},de={class:"input-group-text bg-light rounded-start border-0 text-secondary px-3"},ue={class:"mb-4"},me={class:"input-group-text bg-light rounded-start border-0 text-secondary px-3"},_e=e("div",{id:"passwordHelpBlock",class:"form-text"}," Your password must be 8 characters at least ",-1),pe={class:"mb-4 d-flex justify-content-between"},fe={class:"form-check"},ge=e("label",{class:"form-check-label",for:"exampleCheck1"},"Remember me",-1),he={class:"text-primary-hover"},be=e("u",null,"Forgot password?",-1),ve={class:"align-items-center mt-0"},we={class:"d-grid"},xe=e("div",{class:"position-relative my-4"},[e("hr"),e("p",{class:"small position-absolute top-50 start-50 translate-middle bg-body px-5"},"Or")],-1),ye={href:"#",class:"btn bg-google mb-2 mb-xxl-0 flex-centered"},ke={href:"#",class:"btn bg-facebook mb-0 flex-centered"},Ve={class:"mt-4 text-center"},Se={__name:"sign-In",setup(Ce){const u=O(),m=B(),a=q({email:"",password:""}),l=g(""),h=g(!1),b=g(!1),_=g(!1),P=()=>{_.value=!_.value},L=()=>a.email?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(a.email)?a.password?a.password.length<8?(l.value="Password must be at least 8 characters",!1):!0:(l.value="Password is required",!1):(l.value="Please enter a valid email",!1):(l.value="Email is required",!1),F=async()=>{try{if(console.log("Form submitted, validating..."),!L()){console.log("Validation failed:",l.value);return}console.log("Validation passed, proceeding with login..."),b.value=!0,l.value="",await m.login({email:a.email,password:a.password},h.value),console.log("Login successful, user stored in Pinia:",m.user),console.log("Is Authenticated:",m.isAuthenticated),await new Promise(p=>setTimeout(p,100));let o;m.isStaff?o={name:"admin.dashboard"}:o={name:"student.dashboard"};const n=u.currentRoute.value.query.redirectedFrom;n&&(o=n),console.log("Redirecting to:",o),u.resolve(o).matched.length?await u.push(o):(console.error("Redirect route not found, redirecting to a fallback route"),await u.push("/"))}catch(o){console.error("Login error:",o),o.message==="Token refresh failed"?l.value="Your session has expired. Please log in again.":l.value=o.detail||o.message||"Invalid credentials"}finally{b.value=!1}};return(o,n)=>{const r=I,p=$,w=U,x=T,f=C("font-awesome-icon"),y=C("router-link"),R=M,S=N,v=D,E=W;return V(),k("main",null,[e("section",se,[s(E,{fluid:""},{default:t(()=>[s(v,null,{default:t(()=>[s(r,{cols:"12",lg:"6",class:"d-md-flex align-items-center justify-content-center bg-primary bg-opacity-10 vh-lg-100"},{default:t(()=>[e("div",te,[oe,e("img",{src:i(Q),class:"mt-5",alt:""},null,8,ae)])]),_:1}),s(r,{cols:"12",lg:"6",class:"m-auto"},{default:t(()=>[s(v,{class:"my-5"},{default:t(()=>[s(r,{sm:"10",xl:"8",class:"m-auto"},{default:t(()=>[le,ne,ie,s(S,{onSubmit:Y(F,["prevent"])},{default:t(()=>[l.value.length>0?(V(),k("div",re,H(l.value),1)):A("",!0),e("div",ce,[s(x,{label:"Email address *"},{default:t(()=>[s(w,{size:"lg"},{prepend:t(()=>[e("span",de,[s(i(j))])]),default:t(()=>[s(p,{type:"email",class:"border-0 bg-light rounded-end ps-1",placeholder:"E-mail",modelValue:a.email,"onUpdate:modelValue":n[0]||(n[0]=c=>a.email=c),id:"username-input"},null,8,["modelValue"])]),_:1})]),_:1})]),e("div",ue,[s(x,{label:"Password *"},{default:t(()=>[s(w,{size:"lg"},{prepend:t(()=>[e("span",me,[s(f,{icon:i(X)},null,8,["icon"])])]),append:t(()=>[e("span",{class:"input-group-text bg-light rounded-end border-0 text-secondary px-3 cursor-pointer",onClick:P},[s(f,{icon:_.value?i(J):i(K)},null,8,["icon"])])]),default:t(()=>[s(p,{type:_.value?"text":"password",class:"border-0 bg-light rounded-end ps-1",placeholder:"*********",modelValue:a.password,"onUpdate:modelValue":n[1]||(n[1]=c=>a.password=c)},null,8,["type","modelValue"])]),_:1})]),_:1}),_e]),e("div",pe,[e("div",fe,[z(e("input",{type:"checkbox",class:"form-check-input",id:"exampleCheck1","onUpdate:modelValue":n[2]||(n[2]=c=>h.value=c)},null,512),[[G,h.value]]),ge]),e("div",he,[s(y,{to:{name:"auth.forgot-password"},class:"text-secondary"},{default:t(()=>[be]),_:1})])]),e("div",ve,[e("div",we,[s(R,{variant:"primary",class:"mb-0",type:"submit",disabled:b.value},{default:t(()=>[d("Login")]),_:1},8,["disabled"])])])]),_:1}),s(v,null,{default:t(()=>[xe,s(r,{xxl:"6",class:"d-grid"},{default:t(()=>[e("a",ye,[s(f,{icon:i(Z),class:"fa-fw text-white me-2"},null,8,["icon"]),d(" Login with Google ")])]),_:1}),s(r,{xxl:"6",class:"d-grid"},{default:t(()=>[e("a",ke,[s(f,{icon:i(ee),class:"fa-fw me-2"},null,8,["icon"]),d(" Login with Facebook ")])]),_:1})]),_:1}),e("div",Ve,[e("span",null,[d("Don't have an account? "),s(y,{to:{name:"auth.sign-up"}},{default:t(()=>[d("Signup here")]),_:1})])])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})])])}}};export{Se as default};
