import{d as V,y as A,q as g,E,J as I,c as w,o as _,$ as N,w as d,b as n,H as j,a as t,t as e,f as i,g as B,c3 as T,A as W,X,x as S,V as q,W as J,i as b,m as M,F as P,U as O,n as x,D as C,r as R,h as G,c4 as K,O as Q}from"./index-BKxaJmes.js";import{_ as Y}from"./AdminLayout.vue_vue_type_script_setup_true_lang-C2I9QJJr.js";import{c as f}from"./constants-Bu7G09dq.js";import{V as Z,N as tt}from"./index-DdoyQ2gK.js";import"./DropDown.vue_vue_type_script_setup_true_lang-DCXrtorV.js";import"./ProfileDropdown.vue_vue_type_script_setup_true_lang-DwdOghs1.js";import"./change-casing-BoyW-fpY.js";import"./01-DeMBLNXD.js";import"./MobileNavbarToggler-CAzdXCW6.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./MenuItemWithChildren.vue_vue_type_script_setup_true_lang-BcgdXxdP.js";import"./getActiveClass-BJHf-Sl9.js";import"./menu-items-CfbG37ai.js";import"./index-DwNiKAmd.js";import"./logo-light-sT18Thxh.js";import"./08-DzHvQlEd.js";import"./02-u1oGLGhS.js";import"./05-BauEG9gJ.js";import"./03-6nKUgUxe.js";const et={class:"p-4 bg-primary bg-opacity-10 rounded-3"},st=t("h6",null,"Sales this month",-1),at={class:"mb-0 fs-1 text-primary"},ot={class:"p-4 bg-purple bg-opacity-10 rounded-3"},nt={tabindex:"0",class:"h6 mb-0 icons-center",role:"button","data-bs-toggle":"popover","data-bs-trigger":"focus","data-bs-placement":"top","data-bs-content":"After commission","data-bs-original-title":"",title:""},lt={class:"mb-0 fs-1 text-purple"},rt={class:"p-4 bg-orange bg-opacity-10 rounded-3"},ct=t("h6",null,"Lifetime Earnings",-1),it={class:"mb-0 fs-1 text-orange"},dt=V({__name:"Widgets",setup(D){const y=A.useToast(),r=g({sales_this_month:0,to_be_paid:0,lifetime_earnings:0}),m=a=>a!=null?parseFloat(a).toFixed(2):"0.00";return E(async()=>{try{const a=await I.get("/payments/earnings/");r.value={sales_this_month:a.data.sales_this_month,to_be_paid:a.data.to_be_paid,lifetime_earnings:a.data.lifetime_earnings}}catch(a){y.error("Failed to load earnings data"),console.error("Earnings fetch error:",a)}}),(a,l)=>{const u=j,$=N;return _(),w($,{class:"g-4 mb-4"},{default:d(()=>[n(u,{sm:"6",lg:"4"},{default:d(()=>[t("div",et,[st,t("h2",at,e(i(f))+e(m(r.value.sales_this_month)),1)])]),_:1}),n(u,{sm:"6",lg:"4"},{default:d(()=>[t("div",ot,[t("h6",null,[B("To be paid "),t("a",nt,[n(i(T),{class:"small"})])]),t("h2",lt,e(i(f))+e(m(r.value.to_be_paid)),1)])]),_:1}),n(u,{sm:"6",lg:"4"},{default:d(()=>[t("div",rt,[ct,t("h2",it,e(i(f))+e(m(r.value.lifetime_earnings)),1)])]),_:1})]),_:1})}}}),_t=t("h5",{class:"mb-0"},"Invoice History",-1),mt={class:"table-responsive border-0 mb-0"},ut={class:"table table-dark-gray align-middle p-4 mb-0 table-hover"},pt=t("thead",null,[t("tr",null,[t("th",{scope:"col",class:"border-0 rounded-start"},"Invoice ID"),t("th",{scope:"col",class:"border-0"},"Title"),t("th",{scope:"col",class:"border-0"},"Date"),t("th",{scope:"col",class:"border-0"},"Payment Method"),t("th",{scope:"col",class:"border-0"},"Amount"),t("th",{scope:"col",class:"border-0"},"Status"),t("th",{scope:"col",class:"border-0 rounded-end"},"Action")])],-1),ht={class:"table-responsive-title mb-0"},bt={href:"#"},gt={href:"#",class:"h6 mb-0 icons-center",role:"button",id:"dropdownShare1","data-bs-toggle":"dropdown","aria-expanded":"false"},ft={class:"dropdown-menu dropdown-w-sm dropdown-menu-end min-w-auto shadow rounded","aria-labelledby":"dropdownShare1"},vt={class:"d-flex justify-content-between"},yt=t("span",{class:"small"},"Commission",-1),xt={class:"h6 mb-0 small"},wt=t("hr",{class:"my-1"},null,-1),$t={class:"d-flex justify-content-between"},kt=t("span",{class:"small"},"Earning",-1),Ct={class:"h6 mb-0 small"},Vt={href:"#",class:"btn btn-primary-soft btn-round me-1 mb-1 mb-md-0"},Dt={key:0},Ft=t("td",{colspan:"7",class:"text-center"},"No payments found",-1),St=[Ft],Mt={class:"d-sm-flex justify-content-sm-between align-items-sm-center"},Pt={class:"mb-0 text-center text-sm-start"},At={class:"d-flex justify-content-center mb-0","aria-label":"navigation"},Et={class:"pagination pagination-sm pagination-primary-soft d-inline-block d-md-flex rounded mb-0"},It=["onClick"],Nt=V({__name:"InvoiceHistory",setup(D){const y=A.useToast(),r=g([]),m=g(0),a=g(1),l=g(1),u=g(8),$=W(()=>{const o=[];let p=Math.max(1,l.value-Math.floor(2.5)),v=Math.min(a.value,p+5-1);v-p+1<5&&(p=Math.max(1,v-5+1));for(let h=p;h<=v;h++)o.push(h);return o}),H=o=>new Date(o).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}),F=async(o=1)=>{try{const c=await I.get("/payments/earnings/",{params:{page:o,page_size:u.value}});r.value=c.data.payments,m.value=r.value.length>0?(o-1)*u.value+r.value.length:0,a.value=c.data.total_pages,l.value=c.data.current_page}catch(c){y.error("Failed to load payment history"),console.error("Payment fetch error:",c)}},k=o=>{o<1||o>a.value||o===l.value||(l.value=o,F(o))};return E(()=>{F()}),(o,c)=>{const p=q,v=J,h=R("font-awesome-icon"),L=O,U=X,z=Q;return _(),w(U,{"no-body":"",class:"bg-transparent border"},{default:d(()=>[n(p,{class:"bg-light border-bottom"},{default:d(()=>[_t]),_:1}),n(v,{class:"pb-0"},{default:d(()=>[t("div",mt,[t("table",ut,[pt,t("tbody",null,[(_(!0),b(P,null,M(r.value,s=>(_(),b("tr",{key:s.order_tracking_id},[t("td",null,e(s.order_tracking_id),1),t("td",null,[t("h6",ht,[t("a",bt,e(s.content_object_title),1)])]),t("td",null,e(H(s.created_at)),1),t("td",null,e(s.payment_method_display),1),t("td",null,[B(e(i(f))+e(s.amount.toFixed(2))+" ",1),t("a",gt,[n(i(T))]),t("ul",ft,[t("li",null,[t("div",vt,[yt,t("span",xt,e(i(f))+e((s.amount*.25).toFixed(2)),1)]),wt]),t("li",null,[t("div",$t,[kt,t("span",Ct,e(i(f))+e((s.amount*.75).toFixed(2)),1)])])])]),t("td",null,[t("div",{class:x(["badge bg-opacity-10",s.status==="succeeded"?"bg-success text-success":s.status==="failed"?"bg-danger text-danger":"bg-orange text-orange"])},e(s.status.charAt(0).toUpperCase()+s.status.slice(1)),3)]),t("td",null,[G((_(),b("a",Vt,[n(i(K))])),[[z,"Download",void 0,{hover:!0,top:!0}]])])]))),128)),r.value.length?S("",!0):(_(),b("tr",Dt,St))])])])]),_:1}),a.value>1?(_(),w(L,{key:0,class:"bg-transparent"},{default:d(()=>[t("div",Mt,[t("p",Pt,"Showing "+e((l.value-1)*u.value+1)+" to "+e(Math.min(l.value*u.value,m.value))+" of "+e(m.value)+" entries",1),t("nav",At,[t("ul",Et,[t("li",{class:x(["page-item mb-0",{disabled:l.value===1}])},[t("a",{class:"page-link",href:"#",onClick:c[0]||(c[0]=C(s=>k(l.value-1),["prevent"]))},[n(h,{icon:i(Z)},null,8,["icon"])])],2),(_(!0),b(P,null,M($.value,s=>(_(),b("li",{class:x(["page-item mb-0",{active:s===l.value}]),key:s},[t("a",{class:"page-link",href:"#",onClick:C(Bt=>k(s),["prevent"])},e(s),9,It)],2))),128)),t("li",{class:x(["page-item mb-0",{disabled:l.value===a.value}])},[t("a",{class:"page-link",href:"#",onClick:c[1]||(c[1]=C(s=>k(l.value+1),["prevent"]))},[n(h,{icon:i(tt)},null,8,["icon"])])],2)])])])]),_:1})):S("",!0)]),_:1})}}}),jt=t("h1",{class:"h3 mb-0"},"Earnings",-1),ae=V({__name:"index",setup(D){return(y,r)=>{const m=j,a=N;return _(),w(Y,null,{default:d(()=>[n(a,{class:"mb-3"},{default:d(()=>[n(m,{cols:"12"},{default:d(()=>[jt]),_:1})]),_:1}),n(dt),n(Nt)]),_:1})}}});export{ae as default};
