import{d as j,q as A,A as F,I as ge,c as y,o,H as B,w as a,b as t,X as q,V as H,a as e,t as l,W as P,$ as oe,i,x as D,f as d,g as N,r as J,n as V,bP as ae,bQ as ne,y as le,F as C,m as M,U as fe,D as X,aE as pe,J as ce,E as $e,a$ as ye,b4 as we,aC as xe}from"./index-N9CDaHOP.js";import{_ as ke}from"./AdminLayout.vue_vue_type_script_setup_true_lang-CRgGAbI0.js";import{b as Ce}from"./constants-DJzGRNcz.js";import{d as z,V as De,N as Ae,v as K}from"./index-DdoyQ2gK.js";import{a as re}from"./01-DeMBLNXD.js";import{c as Z}from"./01-D3W7T48W.js";import{_ as ie}from"./ApexChart.vue_vue_type_script_setup_true_lang-DYZEj3Yu.js";import{c as ee}from"./index-DwNiKAmd.js";import"./DropDown.vue_vue_type_script_setup_true_lang-CvqxUwdC.js";import"./ProfileDropdown.vue_vue_type_script_setup_true_lang-MiOOsD2a.js";import"./change-casing-BoyW-fpY.js";import"./MobileNavbarToggler-Bj1WYEMd.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./MenuItemWithChildren.vue_vue_type_script_setup_true_lang-9IhJN-Gy.js";import"./menu-items-1Og9OzUr.js";import"./logo-light-sT18Thxh.js";import"./08-DzHvQlEd.js";import"./02-u1oGLGhS.js";import"./05-BauEG9gJ.js";import"./03-6nKUgUxe.js";const Ne={class:"card-header-title"},Re=["src"],Ee={key:0,class:"text-danger small mt-1"},Ue=["innerHTML"],Le={class:"mb-3"},Me={class:"d-sm-flex align-items-center"},Se={class:"avatar avatar-md"},Ie=["src"],Te={class:"ms-sm-3 mt-2 mt-sm-0"},Ve={class:"mb-0"},je={href:"#"},Be={class:"mb-0 small"},Fe={class:"list-group list-group-borderless"},qe={class:"list-group-item"},He=e("span",null,"Release Date:",-1),Pe={class:"h6 mb-0"},We={class:"list-group-item"},Oe=e("span",null,"Total Hour:",-1),Xe={class:"h6 mb-0"},ze={class:"list-group-item"},Je=e("span",null,"Total Enrolled:",-1),Qe={class:"h6 mb-0"},Ye={class:"list-group-item"},Ge=e("span",null,"Certificate:",-1),Ke={class:"h6 mb-0"},Ze={class:"list-group list-group-borderless"},et={class:"list-group-item"},tt=e("span",null,"Skills:",-1),st={class:"h6 mb-0"},ot={class:"list-group-item"},at=e("span",null,"Total Lecture:",-1),nt={class:"h6 mb-0"},lt={class:"list-group-item"},ct=e("span",null,"Language:",-1),rt={class:"h6 mb-0"},it={class:"list-group-item"},ut=e("span",null,"Review:",-1),dt={class:"h6 mb-0"},te="http://localhost:8000",_t=j({__name:"CourseInfo",props:{course:{type:Object,required:!0}},setup(s){const _=s,w=re,b=A(!1),n=F(()=>{const c=_.course.cover;if(console.log("Course cover:",c),!c)return console.log("Using default image:",Z),Z;const h=c.startsWith("http")?c:`${te}${c.startsWith("/")?"":"/"}${c}`;return console.log("Constructed image URL:",h),b.value=!1,h});ge(()=>_.course.cover,c=>{console.log("Cover changed:",c),b.value=!1});const u=()=>{console.error("Failed to load image:",n.value),b.value=!0},v=()=>{console.log("Image loaded successfully:",n.value),b.value=!1},f=c=>c?new Date(c).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}):"N/A";return(c,h)=>{const x=H,p=B,R=oe,W=J("font-awesome-icon"),g=P,$=q;return o(),y(p,{xxl:"6"},{default:a(()=>[t($,{"no-body":"",class:"bg-transparent border rounded-3 h-100"},{default:a(()=>[t(x,{class:"bg-light border-bottom"},{default:a(()=>[e("h5",Ne,l(s.course.title||"Untitled Course"),1)]),_:1}),t(g,null,{default:a(()=>[t(R,{class:"g-4"},{default:a(()=>[t(p,{md:"6"},{default:a(()=>[e("img",{src:n.value,class:"rounded",alt:"Course cover",onError:u,onLoad:v},null,40,Re),b.value?(o(),i("p",Ee,"Failed to load cover image.")):D("",!0)]),_:1}),t(p,{md:"6"},{default:a(()=>{var k,m,E;return[e("p",{class:"mb-3",innerHTML:s.course.description||"No description available."},null,8,Ue),e("h5",Le,l(d(Ce))+l(s.course.final_price||"0.00"),1),e("div",Me,[e("div",Se,[e("img",{class:"avatar-img rounded-circle",src:(k=s.course.instructor)!=null&&k.avatar?`${te}${s.course.instructor.avatar}`:d(w),alt:"Instructor avatar"},null,8,Ie)]),e("div",Te,[e("h6",Ve,[e("a",je,l(((m=s.course.instructor)==null?void 0:m.full_name)||"Unknown"),1)]),e("p",Be,l(((E=s.course.instructor)==null?void 0:E.role)||"Instructor"),1)])])]}),_:1})]),_:1}),t(R,{class:"mt-3"},{default:a(()=>[t(p,{md:"6"},{default:a(()=>[e("ul",Fe,[e("li",qe,[He,e("span",Pe,l(f(s.course.created_at)),1)]),e("li",We,[Oe,e("span",Xe,l(s.course.total_hours||"N/A"),1)]),e("li",ze,[Je,e("span",Qe,l(s.course.enrollment_count||"0"),1)]),e("li",Ye,[Ge,e("span",Ke,l(s.course.certificate?"Yes":"No"),1)])])]),_:1}),t(p,{md:"6"},{default:a(()=>[e("ul",Ze,[e("li",et,[tt,e("span",st,l(s.course.skill_level||"All levels"),1)]),e("li",ot,[at,e("span",nt,l(s.course.total_lectures||"0"),1)]),e("li",lt,[ct,e("span",rt,l(s.course.language||"English"),1)]),e("li",it,[ut,e("span",dt,[N(l(s.course.rating||"0.0")+" ",1),t(W,{icon:d(z),class:"text-warning ms-1"},null,8,["icon"])])])])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})}}}),ue=s=>{let _=getComputedStyle(document.documentElement).getPropertyValue(s);return _&&_.length>0&&(_=_.trim()),_};ue("--bs-success");const de={height:130,type:"area",series:[{name:"Conversion",data:[200,290,325,500,600,316,478,700]}],options:{chart:{height:130,type:"area",sparkline:{enabled:!0}},dataLabels:{enabled:!1},stroke:{curve:"smooth"},colors:[ue("--bs-purple")],xaxis:{type:"category",categories:["Dec 01","Dec 02","Dec 03","Dec 04","Dec 05","Dec 06","Dec 07","Dec 08","Dec 09 ","Dec 10","Dec 11"]},grid:{},tooltip:{y:{title:{formatter:function(){return""}}},marker:{show:!1}}}},mt=e("h5",{class:"card-header-title mb-0"},"New Enrollment This Month",-1),ht={class:"d-sm-flex justify-content-between p-4"},bt={class:"text-blue mb-0"},vt={class:"mb-0"},gt=j({__name:"EarningChart",props:{course:{type:Object,required:!0}},setup(s){const _=de;return(w,b)=>{const n=H,u=ie,v=P,f=q,c=B;return o(),y(c,{md:"6",xxl:"12"},{default:a(()=>[t(f,{"no-body":"",class:"bg-transparent border overflow-hidden"},{default:a(()=>[t(n,{class:"bg-light border-bottom"},{default:a(()=>[mt]),_:1}),t(v,{class:"p-0"},{default:a(()=>[e("div",ht,[e("h4",bt,l(s.course.enrollment_count||"0"),1),e("p",vt,[e("span",{class:V([s.course.enrollment_change>=0?"text-success":"text-danger","me-1"])},[N(l(s.course.enrollment_change?`${s.course.enrollment_change}%`:"0%")+" ",1),s.course.enrollment_change>=0?(o(),y(d(ae),{key:0})):(o(),y(d(ne),{key:1}))],2),N("vs last Week ")])]),t(u,{chart:s.course.enrollment_data||d(_),class:"apex-charts",id:"activeChartstudent2"},null,8,["chart"])]),_:1})]),_:1})]),_:1})}}}),ft=e("h5",{class:"card-header-title mb-0"},"New Enrollment This Month",-1),pt={class:"d-sm-flex justify-content-between p-4"},$t={class:"text-blue mb-0"},yt={class:"mb-0"},wt=j({__name:"EnrollmentChart",props:{course:{type:Object,required:!0}},setup(s){const _=de;return(w,b)=>{const n=H,u=ie,v=P,f=q,c=B;return o(),y(c,{md:"6",xxl:"12"},{default:a(()=>[t(f,{"no-body":"",class:"bg-transparent border overflow-hidden"},{default:a(()=>[t(n,{class:"bg-light border-bottom"},{default:a(()=>[ft]),_:1}),t(v,{class:"p-0"},{default:a(()=>[e("div",pt,[e("h4",$t,l(s.course.enrollment_count||"0"),1),e("p",yt,[e("span",{class:V([s.course.enrollment_change>=0?"text-success":"text-danger","me-1"])},[N(l(s.course.enrollment_change?`${s.course.enrollment_change}%`:"0%")+" ",1),s.course.enrollment_change>=0?(o(),y(d(ae),{key:0})):(o(),y(d(ne),{key:1}))],2),N("vs last Week ")])]),t(u,{chart:s.course.enrollment_data||d(_),class:"apex-charts",id:"activeChartstudent2"},null,8,["chart"])]),_:1})]),_:1})]),_:1})}}}),xt=e("h5",{class:"mb-0"},"Students All Reviews",-1),kt={key:0,class:"text-center py-4"},Ct=e("p",{class:"text-muted"},"No reviews available.",-1),Dt=[Ct],At={key:1,class:"table-responsive border-0 mb-0"},Nt={class:"table table-dark-gray align-middle p-4 mb-0 table-hover"},Rt=e("thead",null,[e("tr",null,[e("th",{scope:"col",class:"border-0 rounded-start"},"Student Name"),e("th",{scope:"col",class:"border-0"},"Date"),e("th",{scope:"col",class:"border-0"},"Rating"),e("th",{scope:"col",class:"border-0 rounded-end"},"Action")])],-1),Et={class:"d-flex align-items-center position-relative"},Ut={class:"avatar avatar-xs mb-2 mb-md-0"},Lt=["src"],Mt={class:"mb-0 ms-2"},St={class:"mb-0"},It={href:"#",class:"stretched-link"},Tt={class:"text-center text-sm-start"},Vt={class:"mb-0"},jt={key:0,class:"list-inline mb-0 hstack gap-1"},Bt={key:0,class:"list-inline-item me-0 small"},Ft=["onClick"],qt=["onClick"],Ht={class:"d-sm-flex justify-content-sm-between align-items-sm-center"},Pt={class:"mb-0 text-center text-sm-start"},Wt={class:"d-flex justify-content-center mb-0","aria-label":"navigation"},Ot={class:"pagination pagination-sm pagination-primary-soft d-inline-block d-md-flex rounded mb-0"},Xt=["onClick"],zt={class:"d-md-flex"},Jt={class:"avatar avatar-md me-4 flex-shrink-0"},Qt=["src"],Yt={class:"d-sm-flex mt-1 mt-md-0 align-items-center"},Gt={class:"me-3 mb-0"},Kt={key:0,class:"list-inline mb-0 hstack gap-1"},Zt={key:0,class:"list-inline-item me-0 small"},es={class:"small mb-2"},ts={class:"mb-2"},se="http://localhost:8000",ss=j({__name:"Reviews",props:{course:{type:Object,required:!0}},setup(s){const _=s,w=le.useToast(),b=A(!1),n=A(null),u=A(1),v=A(8),f=re,c=F(()=>_.course.reviews||[]),h=F(()=>Math.ceil(c.value.length/v.value)),x=F(()=>{const g=(u.value-1)*v.value;return c.value.slice(g,g+v.value)}),p=g=>g?new Date(g).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}):"N/A",R=g=>{n.value=g,b.value=!0},W=async g=>{var $,k;try{await ce.delete(`course/reviews/${g}/`);const m=_.course.reviews.findIndex(E=>E.id===g);m!==-1&&_.course.reviews.splice(m,1),w.success("Review deleted successfully!")}catch(m){console.error("Failed to delete review:",m),w.error("Failed to delete review: "+(((k=($=m.response)==null?void 0:$.data)==null?void 0:k.message)||"Unknown error"))}};return(g,$)=>{var Q,Y;const k=H,m=J("font-awesome-icon"),E=P,_e=fe,me=q,he=B,be=pe;return o(),i("div",null,[t(he,{cols:"12"},{default:a(()=>[t(me,{"no-body":"",class:"bg-transparent border"},{default:a(()=>[t(k,{class:"bg-light border-bottom"},{default:a(()=>[xt]),_:1}),t(E,{class:"pb-0"},{default:a(()=>[!s.course.reviews||s.course.reviews.length===0?(o(),i("div",kt,Dt)):(o(),i("div",At,[e("table",Nt,[Rt,e("tbody",null,[(o(!0),i(C,null,M(x.value,(r,S)=>{var I,T;return o(),i("tr",{key:S},[e("td",null,[e("div",Et,[e("div",Ut,[e("img",{src:(I=r.student)!=null&&I.avatar?`${se}${r.student.avatar}`:d(f),class:"rounded-circle",alt:""},null,8,Lt)]),e("div",Mt,[e("h6",St,[e("a",It,l(((T=r.student)==null?void 0:T.full_name)||"Unknown"),1)])])])]),e("td",Tt,[e("h6",Vt,l(p(r.created_at)),1)]),e("td",null,[r.rating?(o(),i("ul",jt,[(o(!0),i(C,null,M(Array(Math.floor(r.rating)).fill(0),(U,L)=>(o(),i("li",{class:"list-inline-item me-0 small",key:L},[t(m,{icon:d(z),class:"text-warning"},null,8,["icon"])]))),128)),Number.isInteger(r.rating)?D("",!0):(o(),i("li",Bt,[t(m,{icon:d(K),class:"text-warning"},null,8,["icon"])])),(o(!0),i(C,null,M(r.rating<5&&Array(5-Math.ceil(r.rating)).fill(0),(U,L)=>(o(),i("li",{class:"list-inline-item me-0 small",key:L},[t(m,{icon:d(ee),class:"text-warning"},null,8,["icon"])]))),128))])):D("",!0)]),e("td",null,[e("a",{href:"#",class:"btn btn-sm btn-info-soft mb-0 me-1","data-bs-toggle":"modal","data-bs-target":"#viewReview",onClick:U=>R(r)},"View",8,Ft),e("button",{class:"btn btn-sm btn-danger-soft me-1 mb-1 mb-md-0",onClick:U=>W(r.id)},"Delete",8,qt)])])}),128))])])]))]),_:1}),s.course.reviews&&s.course.reviews.length>0?(o(),y(_e,{key:0,class:"bg-transparent"},{default:a(()=>[e("div",Ht,[e("p",Pt,"Showing "+l((u.value-1)*v.value+1)+" to "+l(Math.min(u.value*v.value,c.value.length))+" of "+l(c.value.length)+" entries",1),e("nav",Wt,[e("ul",Ot,[e("li",{class:V(["page-item mb-0",{disabled:u.value===1}])},[e("a",{class:"page-link",href:"#",onClick:$[0]||($[0]=X(r=>u.value--,["prevent"]))},[t(m,{icon:d(De)},null,8,["icon"])])],2),(o(!0),i(C,null,M(h.value,r=>(o(),i("li",{key:r,class:V(["page-item mb-0",{active:u.value===r}])},[e("a",{class:"page-link",href:"#",onClick:X(S=>u.value=r,["prevent"])},l(r),9,Xt)],2))),128)),e("li",{class:V(["page-item mb-0",{disabled:u.value===h.value}])},[e("a",{class:"page-link",href:"#",onClick:$[1]||($[1]=X(r=>u.value++,["prevent"]))},[t(m,{icon:d(Ae)},null,8,["icon"])])],2)])])])]),_:1})):D("",!0)]),_:1})]),_:1}),t(be,{modelValue:b.value,"onUpdate:modelValue":$[2]||($[2]=r=>b.value=r),title:((Y=(Q=n.value)==null?void 0:Q.student)==null?void 0:Y.full_name)||"Review","header-class":"bg-dark","title-class":"text-white","ok-only":"","ok-title":"Close","ok-variant":"danger-soft",centered:""},{default:a(()=>{var r,S,I,T,U,L,G;return[e("div",zt,[e("div",Jt,[e("img",{class:"avatar-img rounded-circle",src:(S=(r=n.value)==null?void 0:r.student)!=null&&S.avatar?`${se}${n.value.student.avatar}`:d(f),alt:"avatar"},null,8,Qt)]),e("div",null,[e("div",Yt,[e("h5",Gt,l(((T=(I=n.value)==null?void 0:I.student)==null?void 0:T.full_name)||"Unknown"),1),(U=n.value)!=null&&U.rating?(o(),i("ul",Kt,[(o(!0),i(C,null,M(Array(Math.floor(n.value.rating)).fill(0),(ve,O)=>(o(),i("li",{class:"list-inline-item me-0 small",key:O},[t(m,{icon:d(z),class:"text-warning"},null,8,["icon"])]))),128)),Number.isInteger(n.value.rating)?D("",!0):(o(),i("li",Zt,[t(m,{icon:d(K),class:"text-warning"},null,8,["icon"])])),(o(!0),i(C,null,M(n.value.rating<5&&Array(5-Math.ceil(n.value.rating)).fill(0),(ve,O)=>(o(),i("li",{class:"list-inline-item me-0 small",key:O},[t(m,{icon:d(ee),class:"text-warning"},null,8,["icon"])]))),128))])):D("",!0)]),e("p",es,l(p((L=n.value)==null?void 0:L.created_at)),1),e("p",ts,l(((G=n.value)==null?void 0:G.comment)||"No comment provided."),1)])])]}),_:1},8,["modelValue","title"])])}}}),os=e("h1",{class:"h3 mb-2 mb-sm-0"},"Course Details",-1),as={key:0,class:"text-center py-4"},ns=e("p",{class:"text-muted mt-2"},"Loading course...",-1),ls={key:1,class:"text-center py-4"},cs=e("p",{class:"text-muted"},"Course not found.",-1),Ns=j({__name:"index",setup(s){const _=le.useToast(),w=ye(),b=we(),n=A(null),u=A(!0);$e(async()=>{await v()});const v=async()=>{var f,c;try{u.value=!0;const h=w.params.slug,x=await ce.get(`course/courses/${h}/`);n.value=x.data}catch(h){console.error("Failed to fetch course:",h),_.error("Failed to fetch course: "+(((c=(f=h.response)==null?void 0:f.data)==null?void 0:c.message)||"Course not found")),n.value=null,await b.push({name:"admin.courses-list"})}finally{u.value=!1}};return(f,c)=>{const h=J("router-link"),x=B,p=oe,R=xe;return o(),y(ke,null,{default:a(()=>[t(p,{class:"mb-3"},{default:a(()=>[t(x,{cols:"12",class:"d-sm-flex justify-content-between align-items-center"},{default:a(()=>[os,n.value?(o(),y(h,{key:0,to:{name:"admin.course-list"},class:"btn btn-sm btn-primary mb-0"},{default:a(()=>[N("Back to courses")]),_:1})):D("",!0)]),_:1})]),_:1}),t(p,{class:"g-4"},{default:a(()=>[u.value?(o(),i("div",as,[t(R,{variant:"primary",label:"Loading"}),ns])):n.value?(o(),i(C,{key:2},[t(_t,{course:n.value},null,8,["course"]),t(x,{xxl:"6"},{default:a(()=>[t(p,{class:"g-4"},{default:a(()=>[t(gt,{course:n.value},null,8,["course"]),t(wt,{course:n.value},null,8,["course"])]),_:1})]),_:1}),t(ss,{course:n.value},null,8,["course"])],64)):(o(),i("div",ls,[cs,t(h,{to:{name:"admin.course-list"},class:"btn btn-primary"},{default:a(()=>[N("Back to Courses")]),_:1})]))]),_:1})]),_:1})}}});export{Ns as default};
