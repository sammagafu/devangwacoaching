import{y as re,q as u,u as ce,bO as ie,A as v,E as de,J as x,r as $,i as b,o as d,b as o,w as n,H as E,a as e,t as r,$ as M,V as ue,Y as _e,e as pe,f as g,W as me,F as w,m as R,g as V,n as C,c as O,x as B,U as be,D as j,X as he,d as fe}from"./index-N9CDaHOP.js";import{_ as ve}from"./AdminLayout.vue_vue_type_script_setup_true_lang-CRgGAbI0.js";import{_ as ge}from"./ChoicesSelect.vue_vue_type_script_setup_true_lang-DiCDSqEv.js";/* empty css                    */import{f as ye,V as we,N as Ce}from"./index-DdoyQ2gK.js";import{b as ke}from"./constants-DJzGRNcz.js";import{a as xe}from"./01-DeMBLNXD.js";import"./DropDown.vue_vue_type_script_setup_true_lang-CvqxUwdC.js";import"./ProfileDropdown.vue_vue_type_script_setup_true_lang-MiOOsD2a.js";import"./change-casing-BoyW-fpY.js";import"./MobileNavbarToggler-Bj1WYEMd.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./MenuItemWithChildren.vue_vue_type_script_setup_true_lang-9IhJN-Gy.js";import"./menu-items-1Og9OzUr.js";import"./index-DwNiKAmd.js";import"./logo-light-sT18Thxh.js";import"./08-DzHvQlEd.js";import"./02-u1oGLGhS.js";import"./05-BauEG9gJ.js";import"./03-6nKUgUxe.js";const je={class:"text-center p-4 bg-primary bg-opacity-10 border border-primary rounded-3"},$e=e("h6",null,"Total Courses",-1),Ve={class:"mb-0 fs-1 text-primary"},Ae={class:"text-center p-4 bg-success bg-opacity-10 border border-success rounded-3"},Se=e("h6",null,"Activated Courses",-1),De={class:"mb-0 fs-1 text-success"},Fe={class:"text-center p-4 bg-warning bg-opacity-15 border border-warning rounded-3"},Le=e("h6",null,"Pending Courses",-1),Ne={class:"mb-0 fs-1 text-warning"},Pe={class:"bg-transparent p-2 position-absolute top-50 end-0 translate-middle-y border-0 text-primary-hover text-reset",type:"submit"},Te=e("option",{value:""},"Sort by",-1),Ue=e("option",{value:"newest"},"Newest",-1),Re=e("option",{value:"oldest"},"Oldest",-1),Be=e("option",{value:"accepted"},"Accepted",-1),Ee=e("option",{value:"rejected"},"Rejected",-1),Me={class:"table-responsive border-0 rounded-3 mb-0"},Oe={class:"table table-dark-gray align-middle p-4 mb-0 table-hover"},Ye=e("thead",null,[e("tr",null,[e("th",{scope:"col",class:"border-0 rounded-start"},"Course Name"),e("th",{scope:"col",class:"border-0"},"Instructor"),e("th",{scope:"col",class:"border-0"},"Added Date"),e("th",{scope:"col",class:"border-0"},"Type"),e("th",{scope:"col",class:"border-0"},"Price"),e("th",{scope:"col",class:"border-0"},"Status"),e("th",{scope:"col",class:"border-0 rounded-end"},"Action")])],-1),ze={class:"d-flex align-items-center position-relative"},He={class:"w-60px"},We=["src"],Xe={class:"table-responsive-title mb-0 ms-2"},qe={class:"d-flex align-items-center mb-3"},Je={class:"avatar avatar-xs flex-shrink-0"},Qe=["src"],Ge={class:"ms-2"},Ie={class:"mb-0 fw-light"},Ke=e("td",null,[e("span",{class:"badge text-bg-primary"},"Course")],-1),Ze=["onClick"],et=["onClick"],tt={class:"d-sm-flex justify-content-sm-between align-items-sm-center"},st={class:"mb-0 text-center text-sm-start"},ot={class:"d-flex justify-content-center mb-0","aria-label":"navigation"},at={class:"pagination pagination-sm pagination-primary-soft d-inline-block d-md-flex rounded mb-0"},nt=["onClick"],lt={__name:"TableList",setup(Y){const _=re.useToast(),c=u([]),y=u(!1),p=u(""),h=u(""),i=u(1),f=u(10),z=ce(),{user:A}=ie(z),H=v(()=>{var t,a;return((t=A.value)==null?void 0:t.is_admin)||((a=A.value)==null?void 0:a.is_staff)||!1}),W=xe,X=u([{value:"",label:"Sort by"},{value:"newest",label:"Newest"},{value:"oldest",label:"Oldest"},{value:"accepted",label:"Accepted"},{value:"rejected",label:"Rejected"}]),S=v(()=>Math.ceil(c.value.length/f.value)),D=v(()=>{let t=[...c.value];switch(p.value&&(t=t.filter(l=>l.title.toLowerCase().includes(p.value.toLowerCase()))),h.value){case"newest":t.sort((l,m)=>new Date(m.created_at)-new Date(l.created_at));break;case"oldest":t.sort((l,m)=>new Date(l.created_at)-new Date(m.created_at));break;case"accepted":t=t.filter(l=>l.ispublished);break;case"rejected":t=t.filter(l=>!l.ispublished);break}const a=(i.value-1)*f.value;return t.slice(a,a+f.value)}),q=v(()=>c.value.filter(t=>t.ispublished).length),J=v(()=>c.value.filter(t=>!t.ispublished).length);de(async()=>{await Q()});const Q=async()=>{try{y.value=!0;const t=await x.get("course/courses/");c.value=t.data}catch(t){console.error("Failed to fetch courses:",t),_.error("Failed to fetch courses")}finally{y.value=!1}},G=async t=>{try{await x.patch(`course/courses/${t}/`,{ispublished:!0});const a=c.value.find(l=>l.id===t);a&&(a.ispublished=!0),_.success("Course approved successfully!")}catch(a){console.error("Failed to approve course:",a),_.error("Failed to approve course")}},I=async t=>{try{await x.patch(`course/courses/${t}/`,{ispublished:!1}),_.success("Course rejected successfully!")}catch(a){console.error("Failed to reject course:",a),_.error("Failed to reject course")}},K=()=>{},Z=t=>new Date(t).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"});return(t,a)=>{const l=E,m=M,ee=pe,k=$("font-awesome-icon"),F=_e,te=ge,se=ue,L=$("router-link"),oe=me,ae=be,ne=he;return d(),b(w,null,[o(m,{class:"g-4 mb-4"},{default:n(()=>[o(l,{sm:"6",lg:"4"},{default:n(()=>[e("div",je,[$e,e("h2",Ve,r(c.value.length),1)])]),_:1}),o(l,{sm:"6",lg:"4"},{default:n(()=>[e("div",Ae,[Se,e("h2",De,r(q.value),1)])]),_:1}),o(l,{sm:"6",lg:"4"},{default:n(()=>[e("div",Fe,[Le,e("h2",Ne,r(J.value),1)])]),_:1})]),_:1}),o(ne,{"no-body":"",class:"bg-transparent border"},{default:n(()=>[o(se,{class:"bg-light border-bottom"},{default:n(()=>[o(m,{class:"g-3 align-items-center justify-content-between"},{default:n(()=>[o(l,{md:"8"},{default:n(()=>[o(F,{class:"rounded position-relative"},{default:n(()=>[o(ee,{class:"bg-body",type:"search",placeholder:"Search",modelValue:p.value,"onUpdate:modelValue":a[0]||(a[0]=s=>p.value=s)},null,8,["modelValue"]),e("button",Pe,[o(k,{icon:g(ye),class:"fs-6"},null,8,["icon"])])]),_:1})]),_:1}),o(l,{md:"3"},{default:n(()=>[o(F,null,{default:n(()=>[o(te,{id:"sort",class:"border-0 z-index-9",modelValue:h.value,"onUpdate:modelValue":[a[1]||(a[1]=s=>h.value=s),K],options:X.value},{default:n(()=>[Te,Ue,Re,Be,Ee]),_:1},8,["modelValue","options"])]),_:1})]),_:1})]),_:1})]),_:1}),o(oe,null,{default:n(()=>[e("div",Me,[e("table",Oe,[Ye,e("tbody",null,[(d(!0),b(w,null,R(D.value,(s,N)=>{var P,T,U;return d(),b("tr",{key:N},[e("td",null,[e("div",ze,[e("div",He,[e("img",{src:s.cover,class:"rounded",alt:""},null,8,We)]),e("h6",Xe,[o(L,{to:{name:"admin.course.detail",params:{slug:s.slug}},class:"stretched-link"},{default:n(()=>[V(r(s.title),1)]),_:2},1032,["to"])])])]),e("td",null,[e("div",qe,[e("div",Je,[e("img",{class:"avatar-img rounded-circle",src:((P=s.instructor)==null?void 0:P.avatar)||g(W),alt:"avatar"},null,8,Qe)]),e("div",Ge,[e("h6",Ie,r(((T=s.instructor)==null?void 0:T.full_name)||((U=s.instructor)==null?void 0:U.email)||"Unknown"),1)])])]),e("td",null,r(Z(s.created_at)),1),Ke,e("td",null,r(g(ke))+r(s.final_price),1),e("td",null,[e("span",{class:C(["badge bg-opacity-15",s.ispublished?"bg-success text-success":"bg-warning text-warning"])},r(s.ispublished?"Live":"Pending"),3)]),e("td",null,[H.value?(d(),O(L,{key:0,to:{name:"admin.course.edit",params:{slug:s.slug}},class:"btn btn-sm btn-dark me-1 mb-1 mb-md-0"},{default:n(()=>[V("Edit")]),_:2},1032,["to"])):B("",!0),s.ispublished?B("",!0):(d(),b(w,{key:1},[e("a",{href:"#",class:"btn btn-sm btn-success-soft me-1 mb-1 mb-md-0",onClick:le=>G(s.slug)},"Approve",8,Ze),e("button",{class:"btn btn-sm btn-secondary-soft mb-0",onClick:le=>I(s.slug)},"Reject",8,et)],64))])])}),128))])])])]),_:1}),o(ae,{class:"bg-transparent pt-0"},{default:n(()=>[e("div",tt,[e("p",st,"Showing "+r((i.value-1)*f.value+1)+" to "+r(Math.min(i.value*f.value,D.value.length))+" of "+r(c.value.length)+" entries",1),e("nav",ot,[e("ul",at,[e("li",{class:C(["page-item mb-0",{disabled:i.value===1}])},[e("a",{class:"page-link",href:"#",onClick:a[2]||(a[2]=j(s=>i.value--,["prevent"]))},[o(k,{icon:g(we)},null,8,["icon"])])],2),(d(!0),b(w,null,R(S.value,s=>(d(),b("li",{key:s,class:C(["page-item mb-0",{active:i.value===s}])},[e("a",{class:"page-link",href:"#",onClick:j(N=>i.value=s,["prevent"])},r(s),9,nt)],2))),128)),e("li",{class:C(["page-item mb-0",{disabled:i.value===S.value}])},[e("a",{class:"page-link",href:"#",onClick:a[3]||(a[3]=j(s=>i.value++,["prevent"]))},[o(k,{icon:g(Ce)},null,8,["icon"])])],2)])])])]),_:1})]),_:1})],64)}}},rt=e("h1",{class:"h3 mb-2 mb-sm-0"},"Courses",-1),At=fe({__name:"index",setup(Y){return(_,c)=>{const y=$("router-link"),p=E,h=M;return d(),O(ve,null,{default:n(()=>[o(h,{class:"mb-3"},{default:n(()=>[o(p,{cols:"12",class:"d-sm-flex justify-content-between align-items-center"},{default:n(()=>[rt,o(y,{to:{name:"admin.create.course"},class:"btn btn-sm btn-primary mb-0"},{default:n(()=>[V(" Create a Course ")]),_:1})]),_:1})]),_:1}),o(lt)]),_:1})}}});export{At as default};
